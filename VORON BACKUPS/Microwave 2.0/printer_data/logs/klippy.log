===== Config file =====
[virtual_sdcard]
path = ~/printer_data/gcodes
on_error_gcode = CANCEL_PRINT

[pause_resume]

[display_status]

[respond]

[gcode_macro CANCEL_PRINT]
description = Cancel the actual running print
rename_existing = CANCEL_PRINT_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set allow_park = client.park_at_cancel|default(false)|lower == 'true' %}
	{% set retract = client.cancel_retract|default(5.0)|abs %}
	
	{% set park_x = "" if (client.park_at_cancel_x|default(none) is none)
	else "X=" ~ client.park_at_cancel_x %}
	{% set park_y = "" if (client.park_at_cancel_y|default(none) is none)
	else "Y=" ~ client.park_at_cancel_y %}
	{% set custom_park = park_x|length > 0 or park_y|length > 0 %}
	
	
	{% if printer['gcode_macro RESUME'].restore_idle_timeout > 0 %}
	SET_IDLE_TIMEOUT TIMEOUT={printer['gcode_macro RESUME'].restore_idle_timeout}
	{% endif %}
	{% if (custom_park or not printer.pause_resume.is_paused) and allow_park %} _TOOLHEAD_PARK_PAUSE_CANCEL {park_x} {park_y} {% endif %}
	_CLIENT_RETRACT LENGTH={retract}
	TURN_OFF_HEATERS
	M106 S0
	{client.user_cancel_macro|default("")}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	
	SET_PAUSE_NEXT_LAYER ENABLE=0
	SET_PAUSE_AT_LAYER ENABLE=0 LAYER=0
	CANCEL_PRINT_BASE

[gcode_macro PAUSE]
description = Pause the actual running print
rename_existing = PAUSE_BASE
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set idle_timeout = client.idle_timeout|default(0) %}
	{% set temp = printer[printer.toolhead.extruder].target if printer.toolhead.extruder != '' else 0 %}
	{% set restore = False if printer.toolhead.extruder == ''
	else True  if params.RESTORE|default(1)|int == 1 else False %}
	
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=last_extruder_temp VALUE="{{'restore': restore, 'temp': temp}}"
	
	{% if idle_timeout > 0 %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=restore_idle_timeout VALUE={printer.configfile.settings.idle_timeout.timeout}
	SET_IDLE_TIMEOUT TIMEOUT={idle_timeout}
	{% endif %}
	PAUSE_BASE
	{client.user_pause_macro|default("")}
	_TOOLHEAD_PARK_PAUSE_CANCEL {rawparams}

[gcode_macro RESUME]
description = Resume the actual running print
rename_existing = RESUME_BASE
variable_last_extruder_temp = {'restore': False, 'temp': 0}
variable_restore_idle_timeout = 0
variable_idle_state = False
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set sp_move = client.speed_move|default(velocity) %}
	{% set runout_resume = True if client.runout_sensor|default("") == ""
	else True if not printer[client.runout_sensor].enabled
	else printer[client.runout_sensor].filament_detected %}
	{% set can_extrude = True if printer.toolhead.extruder == ''
	else printer[printer.toolhead.extruder].can_extrude %}
	{% set do_resume = False %}
	{% set prompt_txt = [] %}
	
	
	{% if printer.idle_timeout.state|upper == "IDLE" or idle_state %}
	SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=idle_state VALUE=False
	{% if last_extruder_temp.restore %}
	
	RESPOND TYPE=echo MSG='{"Restoring \"%s\" temperature to %3.1f\u00B0C, this may take some time" % (printer.toolhead.extruder, last_extruder_temp.temp) }'
	M109 S{last_extruder_temp.temp}
	{% set do_resume = True %}
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	
	{% elif can_extrude %}
	{% set do_resume = True %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder}'
	{% set _d = prompt_txt.append("\"%s\" not hot enough, please heat up again and press RESUME" % printer.toolhead.extruder) %}
	{% endif %}
	{% if runout_resume %}
	{% if do_resume %}
	{% if restore_idle_timeout > 0 %} SET_IDLE_TIMEOUT TIMEOUT={restore_idle_timeout} {% endif %}
	{client.user_resume_macro|default("")}
	_CLIENT_EXTRUDE
	RESUME_BASE VELOCITY={params.VELOCITY|default(sp_move)}
	{% endif %}
	{% else %}
	RESPOND TYPE=error MSG='{"Resume aborted !!! \"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]}'
	{% set _d = prompt_txt.append("\"%s\" detects no filament, please load filament and press RESUME" % (client.runout_sensor.split(" "))[1]) %}
	{% endif %}
	
	{% if not (runout_resume and do_resume) %}
	RESPOND TYPE=command MSG="action:prompt_begin RESUME aborted !!!"
	{% for element in prompt_txt %}
	RESPOND TYPE=command MSG='{"action:prompt_text %s" % element}'
	{% endfor %}
	RESPOND TYPE=command MSG="action:prompt_footer_button Ok|RESPOND TYPE=command MSG=action:prompt_end|info"
	RESPOND TYPE=command MSG="action:prompt_show"
	{% endif %}

[gcode_macro SET_PAUSE_NEXT_LAYER]
description = Enable a pause if the next layer is reached
gcode = 
	{% set pause_next_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_next_layer %}
	{% set ENABLE = params.ENABLE|default(1)|int != 0 %}
	{% set MACRO = params.MACRO|default(pause_next_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_next_layer VALUE="{{ 'enable': ENABLE, 'call': MACRO }}"

[gcode_macro SET_PAUSE_AT_LAYER]
description = Enable/disable a pause if a given layer number is reached
gcode = 
	{% set pause_at_layer = printer['gcode_macro SET_PRINT_STATS_INFO'].pause_at_layer %}
	{% set ENABLE = params.ENABLE|int != 0 if params.ENABLE is defined
	else params.LAYER is defined %}
	{% set LAYER = params.LAYER|default(pause_at_layer.layer)|int %}
	{% set MACRO = params.MACRO|default(pause_at_layer.call, True) %}
	SET_GCODE_VARIABLE MACRO=SET_PRINT_STATS_INFO VARIABLE=pause_at_layer VALUE="{{ 'enable': ENABLE, 'layer': LAYER, 'call': MACRO }}"

[gcode_macro SET_PRINT_STATS_INFO]
rename_existing = SET_PRINT_STATS_INFO_BASE
description = Overwrite, to get pause_next_layer and pause_at_layer feature
variable_pause_next_layer = { 'enable': False, 'call': "PAUSE" }
variable_pause_at_layer = { 'enable': False, 'layer': 0, 'call': "PAUSE" }
gcode = 
	{% if pause_next_layer.enable %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_next_layer" % pause_next_layer.call}'
	{pause_next_layer.call}
	SET_PAUSE_NEXT_LAYER ENABLE=0
	{% elif pause_at_layer.enable and params.CURRENT_LAYER is defined and params.CURRENT_LAYER|int == pause_at_layer.layer %}
	RESPOND TYPE=echo MSG='{"%s, forced by pause_at_layer [%d]" % (pause_at_layer.call, pause_at_layer.layer)}'
	{pause_at_layer.call}
	SET_PAUSE_AT_LAYER ENABLE=0
	{% endif %}
	SET_PRINT_STATS_INFO_BASE {rawparams}

[gcode_macro _TOOLHEAD_PARK_PAUSE_CANCEL]
description = Helper: park toolhead used in PAUSE and CANCEL_PRINT
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set velocity = printer.configfile.settings.pause_resume.recover_velocity %}
	{% set use_custom     = client.use_custom_pos|default(false)|lower == 'true' %}
	{% set custom_park_x  = client.custom_park_x|default(0.0) %}
	{% set custom_park_y  = client.custom_park_y|default(0.0) %}
	{% set park_dz        = client.custom_park_dz|default(2.0)|abs %}
	{% set sp_hop         = client.speed_hop|default(15) * 60 %}
	{% set sp_move        = client.speed_move|default(velocity) * 60 %}
	
	{% set origin    = printer.gcode_move.homing_origin %}
	{% set act       = printer.gcode_move.gcode_position %}
	{% set max       = printer.toolhead.axis_maximum %}
	{% set cone      = printer.toolhead.cone_start_z|default(max.z) %}
	{% set round_bed = True if printer.configfile.settings.printer.kinematics is in ['delta','polar','rotary_delta','winch']
	else False %}
	
	{% set z_min = params.Z_MIN|default(0)|float %}
	{% set z_park = [[(act.z + park_dz), z_min]|max, (max.z - origin.z)]|min %}
	{% set x_park = params.X       if params.X is defined
	else custom_park_x  if use_custom
	else 0.0            if round_bed
	else (max.x - 5.0) %}
	{% set y_park = params.Y       if params.Y is defined
	else custom_park_y  if use_custom
	else (max.y - 5.0)  if round_bed and z_park < cone
	else 0.0            if round_bed
	else (max.y - 5.0) %}
	
	_CLIENT_RETRACT
	{% if "xyz" in printer.toolhead.homed_axes %}
	G90
	G1 Z{z_park} F{sp_hop}
	G1 X{x_park} Y{y_park} F{sp_move}
	{% if not printer.gcode_move.absolute_coordinates %} G91 {% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='Printer not homed'
	{% endif %}

[gcode_macro _CLIENT_EXTRUDE]
description = Extrudes, if the extruder is hot enough
gcode = 
	
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set use_fw_retract = (client.use_fw_retract|default(false)|lower == 'true') and (printer.firmware_retraction is defined) %}
	{% set length = params.LENGTH|default(client.unretract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_unretract)|default(35) %}
	{% set absolute_extrude = printer.gcode_move.absolute_extrude %}
	
	{% if printer.toolhead.extruder != '' %}
	{% if printer[printer.toolhead.extruder].can_extrude %}
	{% if use_fw_retract %}
	{% if length < 0 %}
	G10
	{% else %}
	G11
	{% endif %}
	{% else %}
	M83
	G1 E{length} F{(speed|float|abs) * 60}
	{% if absolute_extrude %}
	M82
	{% endif %}
	{% endif %}
	{% else %}
	RESPOND TYPE=echo MSG='{"\"%s\" not hot enough" % printer.toolhead.extruder}'
	{% endif %}
	{% endif %}

[gcode_macro _CLIENT_RETRACT]
description = Retracts, if the extruder is hot enough
gcode = 
	{% set client = printer['gcode_macro _CLIENT_VARIABLE']|default({}) %}
	{% set length = params.LENGTH|default(client.retract)|default(1.0)|float %}
	{% set speed = params.SPEED|default(client.speed_retract)|default(35) %}
	
	_CLIENT_EXTRUDE LENGTH=-{length|float|abs} SPEED={speed|float|abs}

[gcode_macro _CLIENT_LINEAR_MOVE]
description = Linear move with save and restore of the gcode state
gcode = 
	{% set x_move = "X" ~ params.X if params.X is defined else "" %}
	{% set y_move = "Y" ~ params.Y if params.Y is defined else "" %}
	{% set z_move = "Z" ~ params.Z if params.Z is defined else "" %}
	{% set e_move = "E" ~ params.E if params.E is defined else "" %}
	{% set rate = "F" ~ params.F if params.F is defined else "" %}
	{% set ABSOLUTE = params.ABSOLUTE | default(0) | int != 0 %}
	{% set ABSOLUTE_E = params.ABSOLUTE_E | default(0) | int != 0 %}
	SAVE_GCODE_STATE NAME=_client_movement
	{% if x_move or y_move or z_move %}
	G9{ 0 if ABSOLUTE else 1 }
	{% endif %}
	{% if e_move %}
	M8{ 2 if ABSOLUTE_E else 3 }
	{% endif %}
	G1 { x_move } { y_move } { z_move } { e_move } { rate }
	RESTORE_GCODE_STATE NAME=_client_movement

[gcode_shell_command microwave_beep]
command = /home/biqu/printer_data/config/sounds/audio_wrapper.sh /home/biqu/printer_data/config/sounds/microwave_beep.wav
timeout = 2
verbose = True

[gcode_shell_command initialize]
command = /home/biqu/printer_data/config/sounds/audio_wrapper.sh /home/biqu/printer_data/config/sounds/initialize.wav
timeout = 2
verbose = True

[gcode_macro MICROWAVE_BEEP]
gcode = 
	RUN_SHELL_COMMAND CMD=initialize
	G4 P1000
	RUN_SHELL_COMMAND CMD=microwave_beep
	G4 P1000
	RUN_SHELL_COMMAND CMD=microwave_beep
	G4 P1000
	RUN_SHELL_COMMAND CMD=microwave_beep

[mcu]
canbus_uuid = 91b3ec371b8f

[mcu UAP]
canbus_uuid = ae7c6f3a047b

[mcu cartographer]
canbus_uuid = 88d7ffc8a72b

[printer]
kinematics = corexy
max_velocity = 600
max_accel = 30000
minimum_cruise_ratio = 0.0
max_z_velocity = 30
max_z_accel = 350
square_corner_velocity = 30

[input_shaper]
shaper_type_x = smooth_zvd_ei
smoother_freq_x = 108.2
shaper_type_y = smooth_zv
smoother_freq_y = 68.6

[temperature_sensor M0_M8P]
sensor_type = temperature_mcu

[temperature_sensor M1_EBB]
sensor_type = temperature_mcu
sensor_mcu = UAP

[temperature_sensor M2_CB1]
sensor_type = temperature_host

[temperature_sensor M3_Cartographer]
sensor_type = temperature_mcu
sensor_mcu = cartographer
min_temp = 5
max_temp = 105

[cartographer coil]
name = M4_Cartographer_Coil
min_temp = 0
max_temp = 105

[temperature_sensor C1_Chamber_Top]
sensor_type = Generic 3950
sensor_pin = PB0
min_temp = 10
max_temp = 80

[temperature_sensor C2_Chamber_Bottom]
sensor_type = Generic 3950
sensor_pin = PC5
min_temp = 10
max_temp = 80

[temperature_sensor C0_Chamber_Avg]
sensor_type = temperature_combined
sensor_list = temperature_sensor C1_Chamber_Top, temperature_sensor C2_Chamber_Bottom
combination_method = mean
maximum_deviation = 999.9

[temperature_sensor C3_Chamber_Low]
sensor_type = temperature_combined
sensor_list = temperature_sensor C1_Chamber_Top, temperature_sensor C2_Chamber_Bottom
combination_method = min
maximum_deviation = 999.9

[adxl345 ebb]
cs_pin = UAP: PB12
spi_bus = spi2_PB2_PB11_PB10
axes_map = x,y,z

[adxl345 carto]
cs_pin = cartographer:PA3
spi_bus = spi1

[resonance_tester]
accel_chip = adxl345 carto
probe_points = 
	125, 125, 30
accel_per_hz = 100

[motors_sync]
axes = x,y
accel_chip = adxl345 carto
steps_model_x = quadratic,
	75.405787432296,
	-247.2752757740688,
	486.372944343731
steps_model_y = quadratic,
	75.405787432296,
	-247.2752757740688,
	486.372944343731

[shaketune]

[stepper_x]
step_pin = PE6
dir_pin = PE5
enable_pin = !PC14
microsteps = 32
rotation_distance = 40
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_x:virtual_endstop
position_min = 0
position_endstop = 250
position_max = 250
homing_speed = 80
homing_accel = 3000
homing_retract_dist = 20
homing_positive_dir = True
use_sensorless_homing = True

[tmc5160 stepper_x]
cs_pin = PC13
spi_software_mosi_pin = PG6
spi_software_miso_pin = PG7
spi_software_sclk_pin = PG8
diag1_pin = ^!PF4
interpolate = True
run_current = 1.0
home_current = 0.5
sense_resistor = 0.075
stealthchop_threshold = 0

[autotune_tmc stepper_x]
motor = omc-14hs20-1504s-c19
sgt = 1
pwm_freq_target = 40e3
voltage = 48

[stepper_x1]
step_pin = PE2
dir_pin = PE1
enable_pin = !PE4
microsteps = 32
rotation_distance = 40
full_steps_per_rotation = 200

[tmc5160 stepper_x1]
cs_pin = PE3
spi_software_mosi_pin = PG6
spi_software_miso_pin = PG7
spi_software_sclk_pin = PG8
interpolate = True
run_current = 1.0
home_current = 0.5
sense_resistor = 0.075
stealthchop_threshold = 0

[autotune_tmc stepper_x1]
motor = omc-14hs20-1504s-c19
pwm_freq_target = 40e3
voltage = 48

[stepper_y]
step_pin = PB4
dir_pin = PB3
enable_pin = !PB6
microsteps = 32
rotation_distance = 40
full_steps_per_rotation = 200
endstop_pin = tmc5160_stepper_y:virtual_endstop
position_min = 0
position_endstop = 250
position_max = 250
homing_speed = 80
homing_accel = 3000
homing_retract_dist = 20
homing_positive_dir = True
use_sensorless_homing = True

[tmc5160 stepper_y]
cs_pin = PB5
spi_software_mosi_pin = PG6
spi_software_miso_pin = PG7
spi_software_sclk_pin = PG8
diag1_pin = ^!PF1
interpolate = True
run_current = 1.0
home_current = 0.5
sense_resistor = 0.075
stealthchop_threshold = 0

[autotune_tmc stepper_y]
motor = omc-14hs20-1504s-c19
sgt = 1
pwm_freq_target = 40e3
voltage = 48

[stepper_y1]
step_pin = PB8
dir_pin = PB7
enable_pin = !PE0
microsteps = 32
rotation_distance = 40
full_steps_per_rotation = 200

[tmc5160 stepper_y1]
cs_pin = PB9
spi_software_mosi_pin = PG6
spi_software_miso_pin = PG7
spi_software_sclk_pin = PG8
interpolate = True
run_current = 1.0
home_current = 0.5
sense_resistor = 0.075
stealthchop_threshold = 0

[autotune_tmc stepper_y1]
motor = omc-14hs20-1504s-c19
pwm_freq_target = 40e3
voltage = 48

[motor_constants amazon]
resistance = 1.8
inductance = 0.0042
holding_torque = 0.4
max_current = 1.7
steps_per_revolution = 200

[stepper_z]
step_pin = PG13
dir_pin = PG12
enable_pin = !PG15
rotation_distance = 8
microsteps = 32
endstop_pin = probe:z_virtual_endstop
homing_retract_dist = 0
position_max = 250
position_min = -2.5
homing_speed = 8.0
second_homing_speed = 3

[tmc2240 stepper_z]
cs_pin = PG14
spi_software_mosi_pin = PG6
spi_software_miso_pin = PG7
spi_software_sclk_pin = PG8
rref = 12000
run_current = 0.800
stealthchop_threshold = 0

[autotune_tmc stepper_z]
motor = amazon

[stepper_z1]
step_pin = PG9
dir_pin = PD7
enable_pin = !PG11
rotation_distance = 8
microsteps = 32

[tmc2240 stepper_z1]
cs_pin = PG10
spi_software_mosi_pin = PG6
spi_software_miso_pin = PG7
spi_software_sclk_pin = PG8
rref = 12000
run_current = 0.800
stealthchop_threshold = 0

[autotune_tmc stepper_z1]
motor = amazon

[stepper_z2]
step_pin = PD4
dir_pin = PD3
enable_pin = !PD6
rotation_distance = 8
microsteps = 32

[tmc2240 stepper_z2]
cs_pin = PD5
spi_software_mosi_pin = PG6
spi_software_miso_pin = PG7
spi_software_sclk_pin = PG8
rref = 12000
run_current = 0.800
stealthchop_threshold = 0

[autotune_tmc stepper_z2]
motor = amazon

[extruder]
step_pin = UAP:PD0
dir_pin = !UAP:PD1
enable_pin = !UAP:PD2
rotation_distance = 22
gear_ratio = 50:10
microsteps = 16
full_steps_per_rotation = 200
nozzle_diameter = 0.400
heater_pin = UAP:PB13
sensor_type = Generic 3950
sensor_pin = UAP:PA3
min_temp = 10
max_temp = 300
max_power = 1.0
min_extrude_temp = 170
heater_power = 100
cooling_fan = fan
filament_diameter = 1.75
filament_density = 1.25
filament_heat_capacity = 2.0
max_extrude_cross_section = 5
max_extrude_only_distance = 500
control = mpc
block_heat_capacity = 19.2882
sensor_responsiveness = 0.104762
ambient_transfer = 0.177400
fan_ambient_transfer = 0.1774, 0.19417, 0.203807, 0.209251, 0.213958, 0.215103, 0.224051

[tmc2209 extruder]
uart_pin = UAP:PA15
interpolate = false
run_current = 0.6
sense_resistor = 0.110
stealthchop_threshold = 0

[heater_bed]
heater_pin = PA1
sensor_type = Generic 3950
sensor_pin = PB1
max_power = 1.0
min_temp = 10
max_temp = 150
pid_version = 1
pid_target = 110.00
pid_tolerance = 0.0200
control = pid
pid_kp = 65.907
pid_ki = 1.782
pid_kd = 609.362

[cartographer]
mcu = cartographer
x_offset = 0
y_offset = 27
verbose = yes

[bed_mesh]
zero_reference_position = 125, 125
speed = 280
horizontal_move_z = 5
mesh_min = 20, 27
mesh_max = 230, 210
probe_count = 15,15
algorithm = bicubic
mesh_pps = 0, 0
faulty_region_1_min = 10, 0
faulty_region_1_max = 50, 35
faulty_region_2_min = 107.5, 0
faulty_region_2_max = 147.5, 35
faulty_region_3_min = 205, 0
faulty_region_3_max = 245, 35
faulty_region_4_min = 10, 92.5
faulty_region_4_max = 50, 132.5
faulty_region_5_min = 107.5, 92.5
faulty_region_5_max = 147.5, 132.5
faulty_region_6_min = 205, 92.5
faulty_region_6_max = 245, 132.5
faulty_region_7_min = 10, 190
faulty_region_7_max = 50, 230
faulty_region_8_min = 107.5, 190
faulty_region_8_max = 147.5, 230
faulty_region_9_min = 205, 190
faulty_region_9_max = 245, 230

[fan]
pin = PA0
kick_start_time = 0.5
min_power = 0.1

[heater_fan hotend_fan]
pin = UAP:PA0
max_power = 1.0
kick_start_time = 0.5
tachometer_pin = ^UAP:PB9
tachometer_ppr = 2
tachometer_poll_interval = 0.0006
heater = extruder
heater_temp = 50.0

[fan_generic Bed_Fans]
pin = PF7

[controller_fan electronics_fan]
pin = PA2
tachometer_pin = PC1
hardware_pwm = True
shutdown_speed = 1.0
fan_speed = 0.8
idle_speed = 0.4
cycle_time = 0.0004
idle_timeout = 60
heater = 

[gcode_macro WLED_ON]
description = Turn WLED strip on using optional preset and resets led colors
gcode = 
	{% set strip = params.STRIP|default("chamber")|string %}
	{% set preset = params.PRESET|default(4)|int %}
	
	{action_call_remote_method("set_wled_state", strip=strip, state=True, preset=preset)}

[gcode_macro off]
gcode = 
	WLED_ON STRIP=chamber PRESET=3

[gcode_macro idle]
gcode = 
	WLED_ON STRIP=chamber PRESET=1

[gcode_macro rainbow]
gcode = 
	WLED_ON STRIP=chamber PRESET=2

[gcode_macro scan]
gcode = 
	WLED_ON STRIP=chamber PRESET=4

[gcode_macro heating]
gcode = 
	WLED_ON STRIP=chamber PRESET=5

[gcode_macro homing]
gcode = 
	WLED_ON STRIP=chamber PRESET=6

[gcode_macro done]
gcode = 
	WLED_ON STRIP=chamber PRESET=7

[delayed_gcode idle_return]
initial_duration = 2
gcode = 
	IDLE

[idle_timeout]
timeout = 1800

[safe_z_home]
home_xy_position = 125,125
speed = 400
z_hop = 0

[z_tilt]
z_positions = 
	-50, 18
	125, 298
	300, 18
points = 
	30, 5
	125, 195
	220, 5
speed = 600
horizontal_move_z = 10
retries = 5
retry_tolerance = 0.0075

[gcode_macro _CG28]
gcode = 
	{% if "xyz" not in printer.toolhead.homed_axes %}
	G28
	{% endif %}

[gcode_macro _CZ_TILT_ADJUST]
gcode = 
	{% if printer.z_tilt.applied == False %}
	Z_TILT_ADJUST {% for p in params %}{'%s=%s ' % (p, params[p])}{% endfor %}
	G28 Z0
	{% endif %}

[gcode_macro _CSYNC_MOTORS]
gcode = 
	{% if not printer.motors_sync.applied %}
	SYNC_MOTORS
	{% endif %}

[gcode_macro _PREHEAT_PROMPT]
gcode = 
	RESPOND TYPE=command MSG="action:prompt_begin Preheat Prompt"
	RESPOND TYPE=command MSG="action:prompt_text Preheat Options:"
	RESPOND TYPE=command MSG="action:prompt_button_group_start"
	RESPOND TYPE=command MSG="action:prompt_button Preheat ABS|PREHEAT BED_TEMP=110|info"
	RESPOND TYPE=command MSG="action:prompt_button Preheat PLA|PREHEAT BED_TEMP=60|info"
	RESPOND TYPE=command MSG="action:prompt_button_group_end"
	RESPOND TYPE=command MSG="action:prompt_show"

[gcode_macro PREHEAT]
gcode = 
	
	{% set BED_TEMP = params.BED_TEMP | default(110) | float %}
	{% set max_x = printer.toolhead.axis_maximum.x | float %}
	{% set max_y = printer.toolhead.axis_maximum.y | float %}
	{% set speed = params.SPEED | default(400) %}
	{% set z_park = params.Z_PARK | default(50) %}
	{% set z_park_speed = params.Z_PARK_SPEED | default(printer.configfile.settings.printer.max_z_velocity) %}
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={BED_TEMP}
	_CG28
	G0 X{max_x - 30} Y{max_y - 30} F{speed * 60}
	
	{% if BED_TEMP > 80 %}
	G0 Z{z_park} F{z_park_speed * 60}
	SET_FAN_SPEED FAN=Bed_Fans SPEED=1
	{% endif %}
	
	M84
	
	{% if BED_TEMP > 80 %}
	TEMPERATURE_WAIT SENSOR="temperature_sensor C3_Chamber_Low" MINIMUM=50
	MICROWAVE_BEEP
	{% endif %}

[gcode_macro PRINT_START]
gcode = 
	
	{% set BED_TEMP = params.BED_TEMP | default(60) | float %}
	{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP | default(200) | float %}
	
	HEATING
	
	SET_HEATER_TEMPERATURE HEATER=heater_bed TARGET={BED_TEMP}
	TEMPERATURE_WAIT SENSOR=heater_bed MINIMUM={BED_TEMP}
	
	BED_MESH_CLEAR
	
	HOMING
	
	_CG28
	_CSYNC_MOTORS
	
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET=150
	
	_CZ_TILT_ADJUST
	
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM=150
	
	CARTOGRAPHER_TOUCH_HOME
	
	SET_HEATER_TEMPERATURE HEATER=extruder TARGET={EXTRUDER_TEMP}
	
	SCAN
	
	BED_MESH_CALIBRATE
	
	G90
	SMART_PARK
	
	HEATING
	
	TEMPERATURE_WAIT SENSOR=extruder MINIMUM={EXTRUDER_TEMP}
	
	RAINBOW
	
	SQUIGGLY_PURGE AMPLITUDE=2.5 PERIOD_LENGTH=2.5 PURGE_LENGTH=20

[gcode_macro PRINT_END]
gcode = 
	SAVE_GCODE_STATE NAME=STATE_PRINT_END
	
	M400
	G92 E0
	G1 E-10.0 F3600
	G91
	G0 Z1.00 X20.0 Y20.0 F20000
	TURN_OFF_HEATERS
	M107
	G1 Z2 F3000
	G90
	G0  X225 Y225 F3600
	BED_MESH_CLEAR
	
	DONE
	UPDATE_DELAYED_GCODE ID=idle_return DURATION=300
	
	RESTORE_GCODE_STATE NAME=STATE_PRINT_END MOVE=0

[gcode_macro SQUIGGLY_PURGE]
gcode = 
	
	{% set TAU = 6.28318 %}
	{% set PI = 3.14159 %}
	{% set FACTORIALS = [1, 2, 24, 720, 40320, 3628800, 479001600, 87178291200, 20922789888000] %}
	
	
	{% set prime_line_steps = params.STEPS|default(16)|int %}
	{% set prime_line_periods = params.PERIODS|default(10)|int %}
	{% set prime_line_amplitude = params.AMPLITUDE|default(5.0)|float %}
	{% set prime_line_period_length = params.PERIOD_LENGTH|default(5.0)|float %}
	{% set prime_line_purge_distance = params.PURGE_LENGTH|default(100.0)|float %}
	{% set prime_line_flowrate = params.FLOWRATE|default(10.0)|float %}
	{% set prime_line_height = params.LINE_HEIGHT|default(0.6)|float %}
	{% set prime_line_unretract_length = params.UNRETRACT_LENGTH|default(10.0)|float %}
	{% set prime_line_direction = params.LINE_DIRECTION|default("X")|string|upper %}
	{% set prime_line_margin = params.LINE_MARGIN|default(10.0)|float %}
	{% set prime_line_adaptive = params.ADAPTIVE_MODE|default(1)|int %}
	{% set verbose = params.VERBOSE|default(1)|int %}
	
	
	{% set coordinates_found = False %}
	{% if params.SIZE is defined and params.SIZE != "0_0_0_0" %}
	{% set xMinSpec, yMinSpec, xMaxSpec, yMaxSpec = params.SIZE.split('_')|map('trim')|map('int') %}
	{% set coordinates_found = True %}
	{% elif printer.exclude_object is defined %}
	{% if printer.exclude_object.objects %}
	
	
	{% set eo_points = printer.exclude_object.objects|map(attribute='polygon')|sum(start=[]) %}
	{% set xMinSpec = eo_points|map(attribute=0)|min %}
	{% set yMinSpec = eo_points|map(attribute=1)|min %}
	{% set xMaxSpec = eo_points|map(attribute=0)|max %}
	{% set yMaxSpec = eo_points|map(attribute=1)|max %}
	{% set coordinates_found = True %}
	{% endif %}
	{% endif %}
	
	
	{% set prime_line_x = params.START_X|default(5.0)|float %}
	{% set prime_line_y = params.START_Y|default(3.5)|float %}
	{% set center_x, center_y = [printer.toolhead.axis_maximum.x / 2, printer.toolhead.axis_maximum.y / 2]|map("float") %}
	
	
	{% if prime_line_direction == "X" %}
	{% set offset_x, offset_y = 0, prime_line_amplitude/2 %}
	{% else %}
	{% set offset_x, offset_y = prime_line_amplitude/2, 0 %}
	{% endif %}
	
	
	
	
	{% if coordinates_found and prime_line_adaptive == 1 %}
	{% set prime_line_x = 2*center_x - prime_line_x if (prime_line_x > center_x and xMaxSpec < center_x) or (prime_line_x < center_x and xMinSpec > center_x)
	else prime_line_x %}
	{% set prime_line_y = 2*center_y - prime_line_y if (prime_line_y > center_y and yMaxSpec < center_y) or (prime_line_y < center_y and yMinSpec > center_y)
	else prime_line_y %}
	{% set prime_line_x = [[prime_line_x, xMinSpec - prime_line_margin - offset_x]|max, xMaxSpec + prime_line_margin + offset_x]|min %}
	{% set prime_line_y = [[prime_line_y, yMinSpec - prime_line_margin - offset_y]|max, yMaxSpec + prime_line_margin + offset_y]|min %}
	{% endif %}
	
	
	{% set prime_line_way = -1 if (prime_line_direction == "X" and prime_line_x > center_x) or (prime_line_direction == "Y" and prime_line_y > center_y) else 1 %}
	
	
	{% set steps = [] %}
	{% set state = namespace(cur_y=prime_line_y, prime_line_length=0.0, cos=0.0) %}
	
	{% for step in range(1, prime_line_periods * prime_line_steps + 1) %}
	{% set sign = cycler(1.0, -1.0) %}
	{% set state.cos = 0.0 %}
	{% set rad_angle = step / prime_line_steps * TAU %}
	{% for i in range(0, FACTORIALS|length) %}
	{% set cos_step = sign.next() * ((rad_angle%TAU)**(2*i) / FACTORIALS[i]) %}
	{% set state.cos = state.cos + cos_step %}
	{% endfor %}
	{% set dist_x = step * prime_line_period_length / prime_line_steps %}
	{% set dist_y = prime_line_amplitude * (0.5 - (0.5 * state.cos)) %}
	{% set rel_x = prime_line_period_length/prime_line_steps %}
	{% set rel_y = prime_line_y + dist_y - state.cur_y %}
	{% set e_length = (rel_x**2 + rel_y**2)**0.5 %}
	{% set state.cur_y = state.cur_y + rel_y %}
	{% set state.prime_line_length = state.prime_line_length + e_length %}
	{% set _ = steps.append((rel_x, rel_y, e_length)) %}
	{% endfor %}
	
	{% set max_extrude_cross_section = printer["configfile"].config["extruder"]["max_extrude_cross_section"]|float %}
	{% set filament_diameter = printer["configfile"].config["extruder"]["filament_diameter"]|float %}
	{% set filament_area = PI * (filament_diameter / 2)**2 %}
	
	
	{% set purge_volume = prime_line_purge_distance * filament_area %}
	{% set line_width = purge_volume / (prime_line_height * state.prime_line_length) %}
	
	
	
	{% if (prime_line_height * line_width) > max_extrude_cross_section %}
	{% if verbose %}
	{action_respond_info("The prime_line_purge_distance of %.4f mm is too high and will exceed the max_extrude_cross_section!" % prime_line_purge_distance)}
	{% endif %}
	{% set prime_line_purge_distance = 0.98 * (max_extrude_cross_section * state.prime_line_length) / filament_area %}
	{% set purge_volume = prime_line_purge_distance * filament_area %}
	{% set line_width = purge_volume / (prime_line_height * state.prime_line_length) %}
	{% if verbose %}
	{action_respond_info("Corrected the prime_line_purge_distance to %.4f mm" % prime_line_purge_distance)}
	{% endif %}
	{% endif %}
	
	
	{% if (prime_line_height / line_width) >= 0.5 %}
	{action_raise_error("The prime line will be too thin %.4f x %.4f and will probably not stick properly to the bed. Increase its purge distance or decrease its length!" % (prime_line_height, line_width))}
	{% endif %}
	
	
	{% set speed = (prime_line_flowrate / (prime_line_height * line_width)) * 60 |float %}
	
	G91
	M83
	{% if (printer.toolhead.position.z < 5) %}
	G1 Z5 F600
	{% endif %}
	
	
	G90
	G0 X{prime_line_x} Y{prime_line_y} F18000
	
	
	G1 Z{prime_line_height*0.8} F600
	
	
	G92 E0
	G1 E{prime_line_unretract_length} F300
	
	
	G92 E0
	G91
	{% if prime_line_direction == "X" %}
	{% for x,y,e in steps %}
	G1 X{x*prime_line_way} Y{y} E{e/state.prime_line_length*prime_line_purge_distance} F{speed}
	{% endfor %}
	{% elif prime_line_direction == "Y" %}
	{% for y,x,e in steps %}
	G1 X{x} Y{y*prime_line_way} E{e/state.prime_line_length*prime_line_purge_distance} F{speed}
	{% endfor %}
	{% else %}
	{ action_respond_error("Prime line direction is not valid. Choose either X or Y in the variables.cfg file!") }
	{% endif %}
	G90
	
	
	G92 E0
	G1 E-0.2 F2100
	G92 E0
	G1 Z3 F600
	
	
	
	G91
	G1 X5 Y5 F18000
	G90
	
	
	M400

[gcode_macro SMART_PARK]
description = Parks your printhead near the print area for pre-print hotend heating.
gcode = 
	
	{% set z_height = params.HEIGHT | default(10) | float %}
	{% set purge_margin = params.MARGIN | default(10) | float %}
	{% set verbose_enable = params.VERBOSE | default(True) | abs %}
	{% set center_x = printer.toolhead.axis_maximum.x / 2 | float %}
	{% set center_y = printer.toolhead.axis_maximum.y / 2 | float %}
	{% set axis_minimum_x = printer.toolhead.axis_minimum.x | float %}
	{% set axis_minimum_y = printer.toolhead.axis_minimum.y | float %}
	{% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
	{% set x_min = all_points | map(attribute=0) | min | default(center_x) %}
	{% set y_min = all_points | map(attribute=1) | min | default(center_y) %}
	{% set travel_speed = (printer.toolhead.max_velocity) * 60 | float %}
	
	{% if purge_margin > 0 and x_min != center_x and y_min != center_y %}
	{% set x_min = [ x_min - purge_margin , x_min ] | min %}
	{% set y_min = [ y_min - purge_margin , y_min ] | min %}
	{% set x_min = [ x_min , axis_minimum_x ] | max %}
	{% set y_min = [ y_min , axis_minimum_y ] | max %}
	{% endif %}
	
	
	{% if verbose_enable == True %}
	
	{ action_respond_info("Smart Park location: {},{}.".format(
	(x_min),
	(y_min),
	)) }
	
	{% endif %}
	
	SAVE_GCODE_STATE NAME=Presmartpark_State
	
	G90
	{% if printer.toolhead.position.z < z_height %}
	G0 Z{z_height}
	{% endif %}
	G0 X{x_min} Y{y_min} F{travel_speed}
	G0 Z{z_height}
	
	RESTORE_GCODE_STATE NAME=Presmartpark_State

[gcode_macro TEST_SPEED]
description = Test for max speed and acceleration parameters for the printer. Procedure: Home -> ReadPositionFromMCU -> MovesToolhead@Vel&Accel -> Home -> ReadPositionfromMCU
gcode = 
	{% set speed  = params.SPEED|default(printer.configfile.settings.printer.max_velocity)|int %}
	{% set iterations = params.ITERATIONS|default(5)|int %}
	{% set accel  = params.ACCEL|default(printer.configfile.settings.printer.max_accel)|int %}
	{% set min_cruise_ratio = params.MIN_CRUISE_RATIO|default(0.5)|float %}
	{% set bound = params.BOUND|default(20)|int %}
	{% set smallpatternsize = SMALLPATTERNSIZE|default(20)|int %}
	
	
	
	{% set x_min = printer.toolhead.axis_minimum.x %}
	{% if x_min < 0 %}
	{% set x_min = 0 %}
	{% endif %}
	
	{% set y_min = printer.toolhead.axis_minimum.y %}
	{% if y_min < 0 %}
	{% set y_min = 0 %}
	{% endif %}
	
	{% set x_min = x_min + bound %}
	{% set x_max = printer.toolhead.axis_maximum.x - bound %}
	{% set y_min = y_min + bound %}
	{% set y_max = printer.toolhead.axis_maximum.y - bound %}
	
	
	
	{% set x_center = (printer.toolhead.axis_minimum.x|float + printer.toolhead.axis_maximum.x|float ) / 2 %}
	{% set y_center = (printer.toolhead.axis_minimum.y|float + printer.toolhead.axis_maximum.y|float ) / 2 %}
	
	
	{% set x_center_min = x_center - (smallpatternsize/2) %}
	{% set x_center_max = x_center + (smallpatternsize/2) %}
	{% set y_center_min = y_center - (smallpatternsize/2) %}
	{% set y_center_max = y_center + (smallpatternsize/2) %}
	
	
	SAVE_GCODE_STATE NAME=TEST_SPEED
	
	
	{ action_respond_info("TEST_SPEED: starting %d iterations at speed %d, accel %d" % (iterations, speed, accel)) }
	
	
	G0 X{x_min} Y{y_min} Z{bound + 10} F{speed*60}
	
	
	{% if printer.configfile.settings.printer.minimum_cruise_ratio is defined %}
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} MINIMUM_CRUISE_RATIO={min_cruise_ratio}
	{% else %}
	SET_VELOCITY_LIMIT VELOCITY={speed} ACCEL={accel} ACCEL_TO_DECEL={accel / 2}
	{% endif %}
	
	{% for i in range(iterations) %}
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_min} Y{y_min} F{speed*60}
	G0 X{x_min} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_max} F{speed*60}
	G0 X{x_max} Y{y_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	
	
	G0 X{x_center_min} Y{y_center_min} F{speed*60}
	G0 X{x_center_min} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_max} F{speed*60}
	G0 X{x_center_max} Y{y_center_min} F{speed*60}
	{% endfor %}
	
	
	{% if printer.configfile.settings.printer.minimum_cruise_ratio is defined %}
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} MINIMUM_CRUISE_RATIO={printer.configfile.settings.printer.minimum_cruise_ratio}
	{% else %}
	SET_VELOCITY_LIMIT VELOCITY={printer.configfile.settings.printer.max_velocity} ACCEL={printer.configfile.settings.printer.max_accel} ACCEL_TO_DECEL={printer.configfile.settings.printer.max_accel_to_decel}
	{% endif %}
	
	
	RESTORE_GCODE_STATE NAME=TEST_SPEED

[telemetry]
enabled = False

[cartographer scan_model default]
coefficients = 1.4166044741692307,1.8869810456855431,0.8433626023682358,0.42663536292537285,0.48118585900961314,0.4175013833908865,-0.31318986750777805,-0.2817758061179949,0.3730661269138628,0.25282088217833554
domain = 3.197856112585044e-07,3.332190706741658e-07
z_offset = -0.02
reference_temperature = 22.98

[cartographer touch_model default]
threshold = 1480
speed = 2.0
z_offset = -0.15

[bed_mesh default]
version = 1
points = 
	-0.051182, -0.047618, -0.046666, -0.042537, -0.040585, -0.044691, -0.042737, -0.039159, -0.037275, -0.031995, -0.023642, -0.021510, -0.026647, -0.036664, -0.043582
	-0.049005, -0.044691, -0.049005, -0.042737, -0.040585, -0.040585, -0.042737, -0.039409, -0.040585, -0.034139, -0.027918, -0.025579, -0.034139, -0.040585, -0.044691
	-0.042737, -0.044891, -0.049005, -0.046847, -0.042537, -0.042637, -0.044891, -0.042737, -0.042537, -0.034139, -0.031995, -0.029854, -0.034139, -0.036288, -0.040585
	-0.034139, -0.040585, -0.044891, -0.040585, -0.036288, -0.038436, -0.040585, -0.038436, -0.036288, -0.030057, -0.023440, -0.021510, -0.023642, -0.027716, -0.027716
	-0.030057, -0.038436, -0.040585, -0.038436, -0.034139, -0.034139, -0.036288, -0.034139, -0.030057, -0.021510, -0.011075, -0.011075, -0.015124, -0.015326, -0.021510
	-0.019379, -0.023642, -0.038436, -0.032199, -0.025781, -0.027716, -0.025579, -0.012996, -0.017452, -0.012996, -0.002602, -0.000491, -0.004721, -0.000491, -0.006837
	-0.014252, -0.019043, -0.027116, -0.023642, -0.017251, -0.017251, -0.012706, -0.004523, -0.003496, 0.001619, 0.009842, 0.014039, 0.018232, 0.014682, 0.006667
	-0.013742, -0.017534, -0.020548, -0.017251, -0.012996, -0.008955, -0.005597, -0.000446, 0.003647, 0.009842, 0.018029, 0.020323, 0.026387, 0.022916, 0.015247
	-0.014260, -0.017116, -0.019414, -0.017251, -0.012996, -0.008754, -0.004592, 0.000449, 0.005241, 0.011942, 0.018232, 0.022417, 0.022417, 0.023497, 0.018753
	-0.012996, -0.015124, -0.019379, -0.017251, -0.012996, -0.010874, -0.006837, -0.000491, 0.003727, 0.011942, 0.020222, 0.024504, 0.022215, 0.022417, 0.018131
	-0.006837, -0.014161, -0.017251, -0.017251, -0.015124, -0.012996, -0.010015, -0.002602, 0.001619, 0.009842, 0.016139, 0.019177, 0.020222, 0.018232, 0.014039
	-0.013197, -0.019379, -0.023642, -0.023642, -0.021510, -0.019379, -0.015326, -0.008955, -0.000491, 0.005633, 0.011942, 0.016139, 0.016139, 0.011942, 0.011942
	-0.017452, -0.027918, -0.032199, -0.032199, -0.029854, -0.027716, -0.023642, -0.016288, -0.006736, -0.000491, 0.003727, 0.007940, 0.011942, 0.005633, -0.000491
	-0.028970, -0.039600, -0.048015, -0.051165, -0.044691, -0.040585, -0.033688, -0.025171, -0.015694, -0.008754, -0.006837, 0.001619, 0.005633, 0.000502, -0.006369
	-0.042911, -0.054069, -0.064795, -0.070507, -0.064172, -0.053328, -0.045136, -0.036568, -0.028349, -0.023642, -0.023642, -0.012996, -0.003661, -0.005879, -0.011026
min_x = 20.0
min_y = 27.0
max_x = 230.0
max_y = 210.0
x_count = 15
y_count = 15
mesh_x_pps = 0
mesh_y_pps = 0
algo = bicubic
tension = 0.2
=======================
Args: ['/home/biqu/klipper/klippy/klippy.py', '/home/biqu/printer_data/config/printer.cfg', '-I', '/home/biqu/printer_data/comms/klippy.serial', '-l', '/home/biqu/printer_data/logs/klippy.log', '-a', '/home/biqu/printer_data/comms/klippy.sock']
App Name: Kalico
Git version: 'v0.12.0-771-gbc2904fa'
Branch: bleeding-edge-v2
Remote: origin
Tracked URL: https://github.com/KalicoCrew/kalico
CPU: 4 core ?
Python: '3.11.2 (main, Apr 28 2025, 14:11:48) [GCC 12.2.0]'
=============== Log rollover at Thu Dec 11 15:46:37 2025 ===============
motors_sync_phase_offset: {'y': 400, 'x': -144}
Extruder max_extrude_ratio=2.078758
mcu 'mcu': Starting CAN connect
Created a socket
webhooks client 281473209124176: New connection
webhooks client 281473209124176: Client info {'program': 'Moonraker', 'version': 'v0.9.3-122-g3eb575d'}
Loaded MCU 'mcu' 123 commands (Kalico v0.12.0-696-g9eac41f9 / gcc: (15:12.2.rel1-1) 12.2.1 20221205 binutils: (2.40-2+18+b1) 2.40)
MCU 'mcu' config: ADC_MAX=4095 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c3_PA8_PC9=PA8,PC9 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3a=PC11,PC12,PC10 BUS_PINS_spi4=PE13,PE14,PE12 BUS_PINS_spi5=PF8,PF9,PF7 BUS_PINS_spi5a=PH7,PF11,PH6 BUS_PINS_spi6=PG12,PG14,PG13 CANBUS_BRIDGE=1 CLOCK_FREQ=400000000 MCU=stm32h723xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PD0,PD1 RESERVE_PINS_USB=PA11,PA12 RESERVE_PINS_crystal=PH0,PH1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'UAP': Starting CAN connect
Created a socket
Loaded MCU 'UAP' 121 commands (Klipper v0.12.0-286-g81de9a86 / gcc: (15:8-2019-q3-1+b1) 8.3.1 20190703 (release) [gcc-8-branch revision 273027] binutils: (2.35.2-2+14+b2) 2.35.2)
MCU 'UAP' config: ADC_MAX=4095 BUS_PINS_i2c1_PA9_PA10=PA9,PA10 BUS_PINS_i2c1_PB6_PB7=PB6,PB7 BUS_PINS_i2c1_PB8_PB9=PB8,PB9 BUS_PINS_i2c2_PB10_PB11=PB10,PB11 BUS_PINS_i2c2_PB13_PB14=PB13,PB14 BUS_PINS_i2c3_PB3_PB4=PB3,PB4 BUS_PINS_i2c3_PC0_PC1=PC0,PC1 BUS_PINS_spi1=PA6,PA7,PA5 BUS_PINS_spi1a=PB4,PB5,PB3 BUS_PINS_spi2=PB14,PB15,PB13 BUS_PINS_spi2_PB2_PB11_PB10=PB2,PB11,PB10 BUS_PINS_spi2a=PC2,PC3,PB10 BUS_PINS_spi3=PB4,PB5,PB3 CANBUS_FREQUENCY=1000000 CLOCK_FREQ=64000000 MCU=stm32g0b1xx PWM_MAX=255 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PB0,PB1 RESERVE_PINS_crystal=PF0,PF1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu 'cartographer': Starting CAN connect
Created a socket
mcu 'cartographer':  got {'clock': 2762623473, 'data': 33331011, 'temp': 55731, '#name': 'cartographer_data', '#sent_time': 54.2054274, '#receive_time': 54.226013067}
Loaded MCU 'cartographer' 73 commands ( CARTOGRAPHER 5.0.0 / )
MCU 'cartographer' config: ADC_MAX=4095 BUS_PINS_i2c1=PB6,PB7 BUS_PINS_spi1=PA6,PA7,PA5 CANBUS_FREQUENCY=1000000 CARTOGRAPHER_ADC_SMOOTH_COUNT=16 CLOCK_FREQ=48000000 MCU=stm32f042x6 PWM_MAX=2 RECEIVE_WINDOW=192 RESERVE_PINS_CAN=PA11,PA12 RESERVE_PINS_crystal=PF0,PF1 STATS_SUMSQ_BASE=256 STEPPER_BOTH_EDGE=1
mcu_temperature 'mcu' nominal base=-273.571429 slope=1625.000000
Sending MCU 'mcu' printer configuration...
Configured MCU 'mcu' (1024 moves)
mcu_temperature 'UAP' nominal base=-272.017291 slope=1298.126801
Sending MCU 'UAP' printer configuration...
Configured MCU 'UAP' (1024 moves)
mcu_temperature 'cartographer' nominal base=338.893709 slope=-710.629067
Received constants: {'ADC_MAX': 4095, 'BUS_PINS_i2c1': 'PB6,PB7', 'BUS_PINS_spi1': 'PA6,PA7,PA5', 'CANBUS_FREQUENCY': 1000000, 'CARTOGRAPHER_ADC_SMOOTH_COUNT': 16, 'CLOCK_FREQ': 48000000, 'MCU': 'stm32f042x6', 'PWM_MAX': 2, 'RECEIVE_WINDOW': 192, 'RESERVE_PINS_CAN': 'PA11,PA12', 'RESERVE_PINS_crystal': 'PF0,PF1', 'STATS_SUMSQ_BASE': 256, 'STEPPER_BOTH_EDGE': 1}
Sending MCU 'cartographer' printer configuration...
Configured MCU 'cartographer' (1024 moves)
Starting heater checks for heater_bed
Stopping stream
bed_mesh: generated points
Index |  Tool Adjusted  |   Probe
  0   | (20.0, 0.0)     | (20.0, 27.0)
  1   | (35.0, 0.0)     | (35.0, 27.0)
  2   | (50.0, 0.0)     | (50.0, 27.0)
  3   | (65.0, 0.0)     | (65.0, 27.0)
  4   | (80.0, 0.0)     | (80.0, 27.0)
  5   | (95.0, 0.0)     | (95.0, 27.0)
  6   | (110.0, 0.0)    | (110.0, 27.0)
  7   | (125.0, 0.0)    | (125.0, 27.0)
  8   | (140.0, 0.0)    | (140.0, 27.0)
  9   | (155.0, 0.0)    | (155.0, 27.0)
  10  | (170.0, 0.0)    | (170.0, 27.0)
  11  | (185.0, 0.0)    | (185.0, 27.0)
  12  | (200.0, 0.0)    | (200.0, 27.0)
  13  | (215.0, 0.0)    | (215.0, 27.0)
  14  | (230.0, 0.0)    | (230.0, 27.0)
  15  | (230.0, 13.1)   | (230.0, 40.1)
  16  | (215.0, 13.1)   | (215.0, 40.1)
  17  | (200.0, 13.1)   | (200.0, 40.1)
  18  | (185.0, 13.1)   | (185.0, 40.1)
  19  | (170.0, 13.1)   | (170.0, 40.1)
  20  | (155.0, 13.1)   | (155.0, 40.1)
  21  | (140.0, 13.1)   | (140.0, 40.1)
  22  | (125.0, 13.1)   | (125.0, 40.1)
  23  | (110.0, 13.1)   | (110.0, 40.1)
  24  | (95.0, 13.1)    | (95.0, 40.1)
  25  | (80.0, 13.1)    | (80.0, 40.1)
  26  | (65.0, 13.1)    | (65.0, 40.1)
  27  | (50.0, 13.1)    | (50.0, 40.1)
  28  | (35.0, 13.1)    | (35.0, 40.1)
  29  | (20.0, 13.1)    | (20.0, 40.1)
  30  | (20.0, 26.1)    | (20.0, 53.1)
  31  | (35.0, 26.1)    | (35.0, 53.1)
  32  | (50.0, 26.1)    | (50.0, 53.1)
  33  | (65.0, 26.1)    | (65.0, 53.1)
  34  | (80.0, 26.1)    | (80.0, 53.1)
  35  | (95.0, 26.1)    | (95.0, 53.1)
  36  | (110.0, 26.1)   | (110.0, 53.1)
  37  | (125.0, 26.1)   | (125.0, 53.1)
  38  | (140.0, 26.1)   | (140.0, 53.1)
  39  | (155.0, 26.1)   | (155.0, 53.1)
  40  | (170.0, 26.1)   | (170.0, 53.1)
  41  | (185.0, 26.1)   | (185.0, 53.1)
  42  | (200.0, 26.1)   | (200.0, 53.1)
  43  | (215.0, 26.1)   | (215.0, 53.1)
  44  | (230.0, 26.1)   | (230.0, 53.1)
  45  | (230.0, 39.2)   | (230.0, 66.2)
  46  | (215.0, 39.2)   | (215.0, 66.2)
  47  | (200.0, 39.2)   | (200.0, 66.2)
  48  | (185.0, 39.2)   | (185.0, 66.2)
  49  | (170.0, 39.2)   | (170.0, 66.2)
...points 50 through 224 truncated
bed_mesh: zero_reference_position is (125.00, 125.00)
bed_mesh: faulty region points
0 (20.00, 27.00), substituted points: [(20.0, 35.0), (50.0, 27.0)]
1 (35.00, 27.00), substituted points: [(35.0, 35.0), (50.0, 27.0)]
2 (50.00, 27.00), substituted points: [(50.0, 35.0), (50.0, 27.0)]
6 (110.00, 27.00), substituted points: [(107.5, 27.0), (110.0, 35.0), (147.5, 27.0)]
7 (125.00, 27.00), substituted points: [(107.5, 27.0), (125.0, 35.0), (147.5, 27.0)]
8 (140.00, 27.00), substituted points: [(107.5, 27.0), (140.0, 35.0), (147.5, 27.0)]
13 (215.00, 27.00), substituted points: [(205.0, 27.0), (215.0, 35.0)]
14 (230.00, 27.00), substituted points: [(205.0, 27.0), (230.0, 35.0)]
90 (20.00, 105.42), substituted points: [(20.0, 92.5), (20.0, 132.5), (50.0, 105.41999999999999)]
91 (35.00, 105.42), substituted points: [(35.0, 92.5), (35.0, 132.5), (50.0, 105.41999999999999)]
92 (50.00, 105.42), substituted points: [(50.0, 92.5), (50.0, 132.5), (50.0, 105.41999999999999)]
96 (110.00, 105.42), substituted points: [(107.5, 105.41999999999999), (110.0, 92.5), (110.0, 132.5), (147.5, 105.41999999999999)]
97 (125.00, 105.42), substituted points: [(107.5, 105.41999999999999), (125.0, 92.5), (125.0, 132.5), (147.5, 105.41999999999999)]
98 (140.00, 105.42), substituted points: [(107.5, 105.41999999999999), (140.0, 92.5), (140.0, 132.5), (147.5, 105.41999999999999)]
103 (215.00, 105.42), substituted points: [(205.0, 105.41999999999999), (215.0, 92.5), (215.0, 132.5)]
104 (230.00, 105.42), substituted points: [(205.0, 105.41999999999999), (230.0, 92.5), (230.0, 132.5)]
105 (230.00, 118.49), substituted points: [(230.0, 92.5), (230.0, 132.5), (205.0, 118.48999999999998)]
106 (215.00, 118.49), substituted points: [(215.0, 92.5), (215.0, 132.5), (205.0, 118.48999999999998)]
111 (140.00, 118.49), substituted points: [(147.5, 118.48999999999998), (140.0, 92.5), (140.0, 132.5), (107.5, 118.48999999999998)]
112 (125.00, 118.49), substituted points: [(147.5, 118.48999999999998), (125.0, 92.5), (125.0, 132.5), (107.5, 118.48999999999998)]
113 (110.00, 118.49), substituted points: [(147.5, 118.48999999999998), (110.0, 92.5), (110.0, 132.5), (107.5, 118.48999999999998)]
117 (50.00, 118.49), substituted points: [(50.0, 118.48999999999998), (50.0, 92.5), (50.0, 132.5)]
118 (35.00, 118.49), substituted points: [(50.0, 118.48999999999998), (35.0, 92.5), (35.0, 132.5)]
119 (20.00, 118.49), substituted points: [(50.0, 118.48999999999998), (20.0, 92.5), (20.0, 132.5)]
120 (20.00, 131.56), substituted points: [(20.0, 92.5), (20.0, 132.5), (50.0, 131.55999999999997)]
121 (35.00, 131.56), substituted points: [(35.0, 92.5), (35.0, 132.5), (50.0, 131.55999999999997)]
122 (50.00, 131.56), substituted points: [(50.0, 92.5), (50.0, 132.5), (50.0, 131.55999999999997)]
126 (110.00, 131.56), substituted points: [(107.5, 131.55999999999997), (110.0, 92.5), (110.0, 132.5), (147.5, 131.55999999999997)]
127 (125.00, 131.56), substituted points: [(107.5, 131.55999999999997), (125.0, 92.5), (125.0, 132.5), (147.5, 131.55999999999997)]
128 (140.00, 131.56), substituted points: [(107.5, 131.55999999999997), (140.0, 92.5), (140.0, 132.5), (147.5, 131.55999999999997)]
133 (215.00, 131.56), substituted points: [(205.0, 131.55999999999997), (215.0, 92.5), (215.0, 132.5)]
134 (230.00, 131.56), substituted points: [(205.0, 131.55999999999997), (230.0, 92.5), (230.0, 132.5)]
195 (230.00, 196.91), substituted points: [(230.0, 190.0), (205.0, 196.90999999999994)]
196 (215.00, 196.91), substituted points: [(215.0, 190.0), (205.0, 196.90999999999994)]
201 (140.00, 196.91), substituted points: [(147.5, 196.90999999999994), (140.0, 190.0), (107.5, 196.90999999999994)]
202 (125.00, 196.91), substituted points: [(147.5, 196.90999999999994), (125.0, 190.0), (107.5, 196.90999999999994)]
203 (110.00, 196.91), substituted points: [(147.5, 196.90999999999994), (110.0, 190.0), (107.5, 196.90999999999994)]
207 (50.00, 196.91), substituted points: [(50.0, 196.90999999999994), (50.0, 190.0)]
208 (35.00, 196.91), substituted points: [(50.0, 196.90999999999994), (35.0, 190.0)]
209 (20.00, 196.91), substituted points: [(50.0, 196.90999999999994), (20.0, 190.0)]
210 (20.00, 209.98), substituted points: [(20.0, 190.0), (50.0, 209.97999999999993)]
211 (35.00, 209.98), substituted points: [(35.0, 190.0), (50.0, 209.97999999999993)]
212 (50.00, 209.98), substituted points: [(50.0, 190.0), (50.0, 209.97999999999993)]
216 (110.00, 209.98), substituted points: [(107.5, 209.97999999999993), (110.0, 190.0), (147.5, 209.97999999999993)]
217 (125.00, 209.98), substituted points: [(107.5, 209.97999999999993), (125.0, 190.0), (147.5, 209.97999999999993)]
218 (140.00, 209.98), substituted points: [(107.5, 209.97999999999993), (140.0, 190.0), (147.5, 209.97999999999993)]
223 (215.00, 209.98), substituted points: [(205.0, 209.97999999999993), (215.0, 190.0)]
224 (230.00, 209.98), substituted points: [(205.0, 209.97999999999993), (230.0, 190.0)]
Starting heater checks for extruder
Stats 55.4: gcodein=0  canstat_mcu: bus_state=active rx_error=0 tx_error=0 tx_retries=0 mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=4512 bytes_read=7539 bytes_retransmit=0 bytes_invalid=0 send_seq=300 receive_seq=300 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399995061  UAP: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1363 bytes_read=4954 bytes_retransmit=0 bytes_invalid=0 send_seq=147 receive_seq=147 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=64000737 adj=64002241  cartographer: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=689 bytes_read=3165 bytes_retransmit=0 bytes_invalid=0 send_seq=94 receive_seq=94 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=48002438 adj=48001849  M0_M8P: temp=0.0 M1_EBB: temp=0.0 M2_CB1: temp=32.6 M3_Cartographer: temp=0.0 C1_Chamber_Top: temp=0.0 C2_Chamber_Bottom: temp=0.0 C0_Chamber_Avg: temp=0.0 C3_Chamber_Low: temp=0.0 heater_bed: target=0 temp=0.0 pwm=0.000 M4_Cartographer_Coil: temp=20.8 sysload=2.87 cputime=12.640 memavail=496992 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=0.0 pwm=0.000
autotune_tmc set stepper_x pwm_freq=1
autotune_tmc set stepper_x1 pwm_freq=1
autotune_tmc set stepper_y pwm_freq=1
autotune_tmc set stepper_y1 pwm_freq=1
autotune_tmc set stepper_z pwm_freq=0
autotune_tmc set stepper_z1 pwm_freq=0
autotune_tmc set stepper_z2 pwm_freq=0
autotune_tmc stepper_x ncycles=300 pfdcycles=90
autotune_tmc set stepper_x tpfd=1
autotune_tmc stepper_x1 ncycles=300 pfdcycles=90
autotune_tmc set stepper_x1 tpfd=1
autotune_tmc stepper_y ncycles=300 pfdcycles=90
autotune_tmc set stepper_y tpfd=1
autotune_tmc stepper_y1 ncycles=300 pfdcycles=90
autotune_tmc set stepper_y1 tpfd=1
autotune_tmc stepper_z ncycles=625 pfdcycles=223
autotune_tmc set stepper_z tpfd=2
autotune_tmc stepper_z1 ncycles=625 pfdcycles=223
autotune_tmc set stepper_z1 tpfd=2
autotune_tmc stepper_z2 ncycles=625 pfdcycles=223
autotune_tmc set stepper_z2 tpfd=2
autotune_tmc set stepper_x tbl=1
autotune_tmc set stepper_x1 tbl=1
autotune_tmc set stepper_y tbl=1
autotune_tmc set stepper_y1 tbl=1
autotune_tmc set stepper_z tbl=1
autotune_tmc set stepper_z1 tbl=1
autotune_tmc set stepper_z2 tbl=1
autotune_tmc set stepper_x toff=2
autotune_tmc set stepper_x1 toff=2
autotune_tmc set stepper_y toff=2
autotune_tmc set stepper_y1 toff=2
autotune_tmc set stepper_z toff=5
autotune_tmc set stepper_z1 toff=5
autotune_tmc seting hysteresis based on 48.0 V
dcoilblank = 0.034286, dcoilsd = 0.008988
hysteresis = 15, htotal = 14, hstrt = 8, hend = 6
autotune_tmc set stepper_x hstrt=7
autotune_tmc seting hysteresis based on 48.0 V
dcoilblank = 0.034286, dcoilsd = 0.008988
hysteresis = 15, htotal = 14, hstrt = 8, hend = 6
autotune_tmc set stepper_x1 hstrt=7
autotune_tmc seting hysteresis based on 48.0 V
dcoilblank = 0.034286, dcoilsd = 0.008988
hysteresis = 15, htotal = 14, hstrt = 8, hend = 6
autotune_tmc set stepper_y hstrt=7
autotune_tmc seting hysteresis based on 48.0 V
dcoilblank = 0.034286, dcoilsd = 0.008988
hysteresis = 15, htotal = 14, hstrt = 8, hend = 6
autotune_tmc set stepper_y1 hstrt=7
autotune_tmc seting hysteresis based on 24.0 V
dcoilblank = 0.010971, dcoilsd = 0.009382
hysteresis = 6, htotal = 6, hstrt = 6, hend = 0
autotune_tmc set stepper_z hstrt=5
autotune_tmc set stepper_z2 toff=5
autotune_tmc set stepper_x hend=9
autotune_tmc set stepper_x1 hend=9
autotune_tmc set stepper_y hend=9
autotune_tmc set stepper_y1 hend=9
autotune_tmc seting hysteresis based on 24.0 V
dcoilblank = 0.010971, dcoilsd = 0.009382
hysteresis = 6, htotal = 6, hstrt = 6, hend = 0
autotune_tmc set stepper_z1 hstrt=5
autotune_tmc using max PWM speed 234.080193
autotune_tmc set stepper_x pwm_autoscale=True
autotune_tmc using max PWM speed 234.080193
autotune_tmc set stepper_x1 pwm_autoscale=True
autotune_tmc set stepper_z hend=3
autotune_tmc seting hysteresis based on 24.0 V
dcoilblank = 0.010971, dcoilsd = 0.009382
hysteresis = 6, htotal = 6, hstrt = 6, hend = 0
autotune_tmc set stepper_z2 hstrt=5
autotune_tmc set stepper_x pwm_autograd=True
autotune_tmc set stepper_x1 pwm_autograd=True
autotune_tmc using max PWM speed 234.080193
autotune_tmc set stepper_y pwm_autoscale=True
autotune_tmc using max PWM speed 234.080193
autotune_tmc set stepper_y1 pwm_autoscale=True
autotune_tmc set stepper_z1 hend=3
autotune_tmc set stepper_x pwm_grad=6
autotune_tmc set stepper_x1 pwm_grad=6
autotune_tmc set stepper_y pwm_autograd=True
autotune_tmc set stepper_y1 pwm_autograd=True
autotune_tmc set stepper_z sg4_thrs=40
autotune_tmc set stepper_z2 hend=3
autotune_tmc set stepper_x pwm_ofs=16
autotune_tmc set stepper_x1 pwm_ofs=16
autotune_tmc set stepper_y pwm_grad=6
autotune_tmc set stepper_z1 sg4_thrs=40
autotune_tmc set stepper_x pwm_reg=15
autotune_tmc set stepper_x1 pwm_reg=15
autotune_tmc set stepper_y pwm_ofs=16
autotune_tmc set stepper_y1 pwm_grad=6
autotune_tmc set stepper_z sg4_filt_en=True
autotune_tmc set stepper_z2 sg4_thrs=40
autotune_tmc set stepper_x pwm_lim=4
autotune_tmc set stepper_x1 pwm_lim=4
autotune_tmc set stepper_y pwm_reg=15
autotune_tmc set stepper_y1 pwm_ofs=16
autotune_tmc set stepper_z1 sg4_filt_en=True
autotune_tmc set stepper_x tpwmthrs=1048575
autotune_tmc set stepper_x1 tpwmthrs=1048575
autotune_tmc using max PWM speed 53.707559
autotune_tmc set stepper_z pwm_autoscale=True
autotune_tmc set stepper_z2 sg4_filt_en=True
autotune_tmc set stepper_x en_pwm_mode=False
autotune_tmc set stepper_x1 en_pwm_mode=False
autotune_tmc set stepper_y pwm_lim=4
autotune_tmc set stepper_y1 pwm_reg=15
autotune_tmc using max PWM speed 53.707559
autotune_tmc set stepper_z1 pwm_autoscale=True
autotune_tmc set stepper_x tcoolthrs=313(30.0)
autotune_tmc set stepper_x sgt=1
autotune_tmc set stepper_x1 tcoolthrs=313(30.0)
autotune_tmc set stepper_x1 sgt=1
autotune_tmc set stepper_z pwm_autograd=True
autotune_tmc using max PWM speed 53.707559
autotune_tmc set stepper_z2 pwm_autoscale=True
autotune_tmc set stepper_x small_hysteresis=False
autotune_tmc set stepper_x1 small_hysteresis=False
autotune_tmc set stepper_y tpwmthrs=1048575
autotune_tmc set stepper_y1 pwm_lim=4
autotune_tmc set stepper_z pwm_grad=11
autotune_tmc set stepper_z1 pwm_autograd=True
autotune_tmc set stepper_x semin=2
autotune_tmc set stepper_x1 semin=2
autotune_tmc set stepper_y en_pwm_mode=False
autotune_tmc set stepper_z2 pwm_autograd=True
autotune_tmc set stepper_x semax=4
autotune_tmc set stepper_x1 semax=4
autotune_tmc set stepper_y tcoolthrs=313(30.0)
autotune_tmc set stepper_y sgt=1
autotune_tmc set stepper_y1 tpwmthrs=1048575
autotune_tmc set stepper_z pwm_ofs=23
autotune_tmc set stepper_x seup=3
autotune_tmc set stepper_x1 seup=3
autotune_tmc set stepper_y small_hysteresis=False
autotune_tmc set stepper_y1 en_pwm_mode=False
autotune_tmc set stepper_z2 pwm_grad=11
autotune_tmc set stepper_x sedn=2
autotune_tmc set stepper_x1 sedn=2
autotune_tmc set stepper_y semin=2
autotune_tmc set stepper_z pwm_reg=15
autotune_tmc set stepper_x seimin=1
autotune_tmc set stepper_x1 seimin=1
autotune_tmc set stepper_y semax=4
autotune_tmc set stepper_y1 tcoolthrs=313(30.0)
autotune_tmc set stepper_y1 sgt=1
autotune_tmc set stepper_z pwm_lim=4
autotune_tmc set stepper_z2 pwm_ofs=23
autotune_tmc set stepper_x sfilt=0
autotune_tmc set stepper_x1 sfilt=0
autotune_tmc set stepper_y seup=3
autotune_tmc set stepper_y1 small_hysteresis=False
autotune_tmc set stepper_z tpwmthrs=0
autotune_tmc set stepper_z1 pwm_grad=11
autotune_tmc set stepper_z2 pwm_reg=15
autotune_tmc set stepper_x iholddelay=12
autotune_tmc set stepper_x1 iholddelay=12
autotune_tmc set stepper_y sedn=2
autotune_tmc set stepper_y1 semin=2
autotune_tmc set stepper_z en_pwm_mode=True
autotune_tmc set stepper_z1 pwm_ofs=23
autotune_tmc set stepper_x vhighfs=False
autotune_tmc set stepper_x1 vhighfs=False
autotune_tmc set stepper_y seimin=1
autotune_tmc set stepper_y1 semax=4
autotune_tmc set stepper_z tcoolthrs=326(6.0)
autotune_tmc set stepper_z sgt=1
autotune_tmc set stepper_z1 pwm_reg=15
autotune_tmc set stepper_z2 pwm_lim=4
autotune_tmc set stepper_x vhighchm=False
autotune_tmc set stepper_x1 vhighchm=False
autotune_tmc set stepper_y sfilt=0
autotune_tmc set stepper_y1 seup=3
autotune_tmc set stepper_z small_hysteresis=False
autotune_tmc set stepper_z1 pwm_lim=4
autotune_tmc set stepper_x multistep_filt=True
autotune_tmc set stepper_x1 multistep_filt=True
autotune_tmc set stepper_y iholddelay=12
autotune_tmc set stepper_y1 sedn=2
autotune_tmc set stepper_z semin=2
autotune_tmc set stepper_z1 tpwmthrs=0
autotune_tmc set stepper_z2 tpwmthrs=0
autotune_tmc set stepper_y vhighfs=False
autotune_tmc set stepper_y1 seimin=1
autotune_tmc set stepper_z semax=4
autotune_tmc set stepper_z1 en_pwm_mode=True
autotune_tmc set stepper_z2 en_pwm_mode=True
autotune_tmc set stepper_y vhighchm=False
autotune_tmc set stepper_y1 sfilt=0
autotune_tmc set stepper_z seup=3
autotune_tmc set stepper_z1 tcoolthrs=326(6.0)
autotune_tmc set stepper_z1 sgt=1
autotune_tmc set stepper_z2 tcoolthrs=326(6.0)
autotune_tmc set stepper_z2 sgt=1
autotune_tmc set stepper_y multistep_filt=True
autotune_tmc set stepper_y1 iholddelay=12
autotune_tmc set stepper_z sedn=2
autotune_tmc set stepper_z1 small_hysteresis=False
autotune_tmc set stepper_y1 vhighfs=False
autotune_tmc set stepper_z seimin=1
autotune_tmc set stepper_z1 semin=2
autotune_tmc set stepper_z2 small_hysteresis=False
autotune_tmc set stepper_y1 vhighchm=False
autotune_tmc set stepper_z sfilt=0
autotune_tmc set stepper_z1 semax=4
autotune_tmc set stepper_z2 semin=2
autotune_tmc set stepper_y1 multistep_filt=True
autotune_tmc set stepper_z iholddelay=12
autotune_tmc set stepper_z1 seup=3
autotune_tmc set stepper_z irundelay=0
autotune_tmc set stepper_z1 sedn=2
autotune_tmc set stepper_z2 semax=4
autotune_tmc set stepper_z thigh=30(64.44907077350351)
autotune_tmc set stepper_z vhighfs=False
autotune_tmc set stepper_z1 seimin=1
autotune_tmc set stepper_z2 seup=3
autotune_tmc set stepper_z vhighchm=False
autotune_tmc set stepper_z1 sfilt=0
autotune_tmc set stepper_z multistep_filt=True
autotune_tmc set stepper_z1 iholddelay=12
autotune_tmc set stepper_z2 sedn=2
autotune_tmc set stepper_z slope_control=3
autotune_tmc set stepper_z1 irundelay=0
autotune_tmc set stepper_z2 seimin=1
autotune_tmc set stepper_z1 thigh=30(64.44907077350351)
autotune_tmc set stepper_z1 vhighfs=False
autotune_tmc set stepper_z1 vhighchm=False
autotune_tmc set stepper_z2 sfilt=0
autotune_tmc set stepper_z1 multistep_filt=True
autotune_tmc set stepper_z2 iholddelay=12
autotune_tmc set stepper_z1 slope_control=3
autotune_tmc set stepper_z2 irundelay=0
autotune_tmc set stepper_z2 thigh=30(64.44907077350351)
autotune_tmc set stepper_z2 vhighfs=False
autotune_tmc set stepper_z2 vhighchm=False
autotune_tmc set stepper_z2 multistep_filt=True
autotune_tmc set stepper_z2 slope_control=3
Stats 56.4: gcodein=0  canstat_mcu: bus_state=active rx_error=0 tx_error=0 tx_retries=0 mcu: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=9469 bytes_read=12053 bytes_retransmit=0 bytes_invalid=0 send_seq=667 receive_seq=667 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=399994083  UAP: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=1369 bytes_read=5075 bytes_retransmit=0 bytes_invalid=0 send_seq=148 receive_seq=148 retransmit_seq=0 srtt=0.000 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=64001118 adj=64001509  cartographer: mcu_awake=0.000 mcu_task_avg=0.000000 mcu_task_stddev=0.000000 bytes_write=695 bytes_read=3280 bytes_retransmit=0 bytes_invalid=0 send_seq=95 receive_seq=95 retransmit_seq=0 srtt=0.001 rttvar=0.000 rto=0.025 ready_bytes=0 upcoming_bytes=0 freq=48000363 adj=48003481  M0_M8P: temp=30.3 M1_EBB: temp=24.0 M2_CB1: temp=30.6 M3_Cartographer: temp=30.8 C1_Chamber_Top: temp=21.1 C2_Chamber_Bottom: temp=20.7 C0_Chamber_Avg: temp=20.9 C3_Chamber_Low: temp=20.7 heater_bed: target=0 temp=20.6 pwm=0.000 M4_Cartographer_Coil: temp=20.8 sysload=2.87 cputime=13.200 memavail=493364 print_time=0.000 buffer_time=0.000 print_stall=0 extruder: target=0 temp=20.2 pwm=0.000
